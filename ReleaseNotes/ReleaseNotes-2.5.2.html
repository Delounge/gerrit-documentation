<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.3" />
<title>Release notes for Gerrit 2.5.2</title>
<style type="text/css">
/* Sans-serif font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
div#toctitle,
span#author, span#revnumber, span#revdate, span#revremark,
div#footer {
  font-family: Arial,Helvetica,sans-serif;
}

/* Serif font. */
div.sectionbody {
  font-family: Georgia,"Times New Roman",Times,serif;
}

/* Monospace font. */
tt {
  font-size: inherit;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  font-size: inherit;
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
}

div#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  div#footer-badges { display: none; }
}

div#toc {
  margin-bottom: 2.5em;
}

div#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes(); asciidoc.toc(2);}
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  var cont = document.getElementById("content");
  var noteholder = document.getElementById("footnotes");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      // Use [\s\S] in place of . so multi-line matches work.
      // Because JavaScript has no s (dotall) regex flag.
      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      spans[i].innerHTML =
        "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
        "' title='View footnote' class='footnote'>" + n + "</a>]";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
}

}
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Release notes for Gerrit 2.5.2</h1>
<span id="revnumber">version 2.5.2</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Gerrit 2.5.2 is now available:</p></div>
<div class="paragraph"><p><a href="http://code.google.com/p/gerrit/downloads/detail?name=gerrit-full-2.5.2.war">http://code.google.com/p/gerrit/downloads/detail?name=gerrit-full-2.5.2.war</a></p></div>
<div class="paragraph"><p>There are no schema changes from 2.5, or 2.5.1.</p></div>
<div class="paragraph"><p>However, if upgrading from anything earlier version, follow the upgrade
procedure in the 2.5 <a href="ReleaseNotes-2.5.html">Release Notes</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_bug_fixes">Bug Fixes</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Improve performance of ReceiveCommits for repos with many refs
</p>
<div class="paragraph"><p>When validating the received commits all existing refs were added as
uninteresting to the RevWalk. This resulted in bad performance when a
repository had many refs (&gt;100000). Putting existing <em>refs/changes/</em>
or <em>refs/tags/</em> into the RevWalk is now avoided, which improves the
performance.</p></div>
</li>
<li>
<p>
Improve Push performance by discarding <em>cache-automerge/*</em> refs
  early in VisibleRefFilter
</p>
<div class="paragraph"><p>For a typical large Git repository, with many refs and lots of cached
merges, the push time goes down significantly.</p></div>
</li>
<li>
<p>
Don&#8217;t display all files from a merge-commit when auto-merge fails
</p>
<div class="paragraph"><p>For merge commits Gerrit shows the difference to the automatic merge
result. The creation of the auto-merge result may fail, e.g. when the
merge commit has multiple merge bases (because JGit doesn&#8217;t support
this case yet). In this case Gerrit was showing all files from the
merge commit. This caused several issues:</p></div>
<div class="openblock">
<div class="content">
<div class="ulist"><ul>
<li>
<p>
the file list was too large for projects with a large number of
   files
</p>
</li>
<li>
<p>
Gerrit would send too many false notification emails to users
   watching changes under certain paths
</p>
</li>
<li>
<p>
both client and server needed a lot of resources in order to handle
   such a large list of files
</p>
</li>
</ul></div>
</div></div>
<div class="paragraph"><p>Now the file list for a merge commit will be empty when the creation
of the auto-merge result fails.</p></div>
</li>
<li>
<p>
<a href="http://code.google.com/p/gerrit/issues/detail?id=1726">issue 1726</a>:
  Create ref for new patch set on direct push
</p>
<div class="paragraph"><p>If a change is in review and a new commit that has the Change-Id of
this change in its commit message is pushed directly, then a new patch
set for this commit is created and the change gets automatically
closed. The problem was that no change ref for this new patch set was
created and as result the change ref that was shown for the new patch
set in the WebUI, and which was contained in the patchset-created
event, was invalid.</p></div>
</li>
<li>
<p>
<a href="http://code.google.com/p/gerrit/issues/detail?id=1767">issue 1767</a>:
  Remove wrong error message when pushing a new ref fails
</p>
<div class="paragraph"><p>If pushing a new ref was rejected because the user was not allowed to
create it the error message always told the user that he&#8217;s missing the
<em>Create Reference</em> access right. This message was incorrect in some
cases. Users that have the <em>Create Reference</em> access right assigned
are e.g. not allowed to create the ref if:</p></div>
<div class="openblock">
<div class="content">
<div class="ulist"><ul>
<li>
<p>
they are pushing an annotated tag without having the
   <em>Push Annotated Tag</em> access right
</p>
</li>
<li>
<p>
they are pushing a signed tag without having the <em>Push Signed Tag</em>
   access right
</p>
</li>
<li>
<p>
the project state is set to <em>Read Only</em>
</p>
</li>
</ul></div>
</div></div>
<div class="paragraph"><p>Now the error message just says <em>Prohibited by Gerrit</em>. This generic
error message is better than a more concrete error message which is
wrong in same cases because a wrong message is misleading and
confuses the user.</p></div>
<div class="paragraph"><p>In addition the description of the <em>Prohibited by Gerrit</em> error in the
documentation has been updated to explain some additional cases in
which the <em>Prohibited by Gerrit</em> error occurs.</p></div>
</li>
<li>
<p>
<a href="http://code.google.com/p/gerrit/issues/detail?id=1444">issue 1444</a>:
  Remove <em>Mailing-List</em> header from sent emails
</p>
<div class="paragraph"><p>The non-standard <em>Mailing-List</em> header that is included in the emails
sent by Gerrit isn&#8217;t allowed by the Amazon Simple Email Service and is
now removed.</p></div>
</li>
<li>
<p>
Improve SMTP client error messages
</p>
<div class="paragraph"><p>The wording of the error messages in the SMTP client was changed to
make it more clear at exactly what stage in the SMTP transaction the
server returned an error. Also the server&#8217;s response text is now
always included.</p></div>
<div class="paragraph"><p>In addition it is now ensured that already rejected recipients are
included in the error message when the server rejects the DATA
command. Without this there is no way of debugging rejected
recipients if all recipients are rejected since that typically
results in a DATA command rejection. Because some SMTP servers (e.g.
Postfix with the default configuration) delay rejection of HELO/EHLO
and MAIL FROM commands to the RCPT TO stage, this can happen not only
for bad recipients.</p></div>
</li>
<li>
<p>
Allow time unit variables to be <em>0</em>
</p>
<div class="paragraph"><p><a href="http://gerrit-documentation.googlecode.com/svn/Documentation/2.5/config-gerrit.html">
Gerrit Configuration parameters</a> that expect a numerical time unit as
value can now be set to <em>0</em>.</p></div>
</li>
<li>
<p>
<a href="http://code.google.com/p/gerrit/issues/detail?id=1076">issue 1076</a>:
  Fix CLA hyperlink on account registration page
</p>
<div class="paragraph"><p>The New Contributor Agreement hyperlink on the Account Registration page
was malformed.</p></div>
</li>
<li>
<p>
Fix broken link to repo command reference
</p>
<div class="paragraph"><p>The link to the repo command reference in the <em>repo upload</em> section of
the <em>Uploading Changes</em> documentation was broken.</p></div>
</li>
<li>
<p>
<a href="http://code.google.com/p/gerrit/issues/detail?id=1569">issue 1569</a>:
Fix unexpected behaviour in the commit-msg hook caused by <tt>GREP_OPTIONS</tt>
</p>
<div class="paragraph"><p>If <tt>GREP_OPTIONS</tt> was set, it caused unexpected behaviour in the
commit-msg hook.  For example if it included a setting like
<tt>--exclude=".git/*"</tt> it caused a new <tt>Change-Id</tt> line to be appended
to the commit message on every amend.</p></div>
<div class="paragraph"><p><tt>GREP_OPTIONS</tt> is now unset at the beginning of the commit-msg script
to prevent such problems from occurring.</p></div>
<div class="paragraph"><p>The <tt>GREP_OPTIONS</tt> setting in the user&#8217;s environment is unaffected
by this change.</p></div>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 2.5.2<br />
Last updated 2013-02-12 10:15:32 CET
</div>
</div>
</body>
</html>
