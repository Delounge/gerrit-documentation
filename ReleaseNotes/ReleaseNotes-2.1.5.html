<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.5.2" />
<title>Release notes for Gerrit 2.1.5</title>
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #dddddd;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}


@media print {
  div#footer-badges { display: none; }
}

div#toc {
  margin-bottom: 2.5em;
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes(); asciidoc.toc(2);}
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  var cont = document.getElementById("content");
  var noteholder = document.getElementById("footnotes");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      // Use [\s\S] in place of . so multi-line matches work.
      // Because JavaScript has no s (dotall) regex flag.
      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      spans[i].innerHTML =
        "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
        "' title='View footnote' class='footnote'>" + n + "</a>]";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
}

}
/*]]>*/
</script>
</head>
<body>
<div id="header">
<h1>Release notes for Gerrit 2.1.5</h1>
<span id="revnumber">version 2.1.5</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Gerrit 2.1.5 is now available:</p></div>
<div class="paragraph"><p><a href="http://code.google.com/p/gerrit/downloads/detail?name=gerrit-2.1.5.war">http://code.google.com/p/gerrit/downloads/detail?name=gerrit-2.1.5.war</a></p></div>
<div class="paragraph"><p>This is primarly a bug fix release to 2.1.4, but some additional
new features were included so its named 2.1.5 rather than 2.1.4.1.</p></div>
</div>
</div>
<h2 id="_upgrade_instructions">Upgrade Instructions</h2>
<div class="sectionbody">
<div class="paragraph"><p>If upgrading from version 2.1.4, simply replace the WAR file in
<tt>'site_path'/bin/gerrit.war</tt> and restart Gerrit.</p></div>
<div class="paragraph"><p>If upgrading from version 2.1.3 or earlier, stop Gerrit, use
<tt>java -jar gerrit.war init -d 'site_path'</tt> to upgrade the schema,
and restart Gerrit.</p></div>
</div>
<h2 id="_new_features">New Features</h2>
<div class="sectionbody">
<h3 id="_web_ui">Web UI</h3><div style="clear:left"></div>
<div class="ulist"><ul>
<li>
<p>
issue 361 Enable commenting on commit messages
</p>
<div class="paragraph"><p>The commit message of a change can now be commented on inline, and
even compared between patch sets, just like any other file contents.
The message is presented as a magical file called <em>Commit Message</em>,
in the first row of every change.</p></div>
</li>
<li>
<p>
issue 312 Implement <em>Restore Change</em> to undo <em>Abandon Change</em>
</p>
<div class="paragraph"><p>Any user who can abandon a change (the change owner, project owner,
or any site administrator) can now restore the change from Abandoned
status back to Review in Progress.</p></div>
</li>
<li>
<p>
issue 583 Enable/disable download protocols
</p>
<div class="paragraph"><p>The new download section in <tt>gerrit.config</tt> controls how the patch
set download links are presented in the web UI.  Administrators
can use this section to enable <tt>repo download</tt>, <tt>git://</tt>, or to
disable <tt>http://</tt> style URLs.  This section replaces the older
repo.showDownloadCommand.</p></div>
</li>
<li>
<p>
issue 499 Display the size of a patch (lines added/removed)
</p>
<div class="paragraph"><p>A <em>diffstat</em> is shown for each file, summarizing the size of the
change on that file in terms of number of lines added or deleted.</p></div>
</li>
</ul></div>
<h3 id="_email_notifications">Email Notifications</h3><div style="clear:left"></div>
<div class="ulist"><ul>
<li>
<p>
issue 452 Include a quick summary of the size of a change in email
</p>
<div class="paragraph"><p>After the file listing, a summary totaling the number of files
changed, lines added, and lines removed is displayed.  This may
help reviewers to get a quick estimation on the time required for
them to review the change.</p></div>
</li>
</ul></div>
</div>
<h2 id="_bug_fixes">Bug Fixes</h2>
<div class="sectionbody">
<h3 id="_web_ui_2">Web UI</h3><div style="clear:left"></div>
<div class="ulist"><ul>
<li>
<p>
issue 639 Fix keyboard shortcuts under Chrome/Safari
</p>
<div class="paragraph"><p>Keyboard shortcuts didn&#8217;t work properly on modern WebKit browsers
like Chrome and Safari.  We kept trying to blame this on the browser,
but it was Gerrit Code Review at fault.  The UI was using the wrong
listener type to receive keyboard events in comment editors.  Fixed.</p></div>
</li>
<li>
<p>
Make <em>u</em> go up to the last change listing
</p>
<div class="paragraph"><p>Previously the <em>u</em> key on a change page was hardcoded to take
the user to their own dashboard.  However, if they arrived at the
change through a query such as <tt>is:starred status:open</tt>, this was
quite annoying, as the query had to be started over again to move
to the next matching change.  Now the <em>u</em> key goes back to the
query results.</p></div>
</li>
<li>
<p>
issue 671 Honor user&#8217;s syntax coloring preference in unified view
</p>
<div class="paragraph"><p>The user&#8217;s syntax coloring preference was always ignored in the
unified view, even though the side-by-side view honored it.  Fixed.</p></div>
</li>
<li>
<p>
issue 651 Display stars in dependency tables
</p>
<div class="paragraph"><p>The <em>Depends On</em> and <em>Needed By</em> tables on a change page did not
show the current user&#8217;s star settings, even though the star icon
is present and will toggle the user&#8217;s starred flag for that change.
Fixed.</p></div>
</li>
</ul></div>
<h3 id="_access_control">Access Control</h3><div style="clear:left"></div>
<div class="ulist"><ul>
<li>
<p>
issue 672 Fix branch owner adding exclusive ACL
</p>
<div class="paragraph"><p>Branch owners could not add exclusive ACLs within their branch
namespace.  This was caused by the server trying to match the leading
<tt>-</tt> entered by the branch administrator against patterns that did
not contain <tt>-</tt>, and therefore always failed.  Fixed by removing
the magical <tt>-</tt> from the proposed new specification before testing
the access rights.</p></div>
</li>
<li>
<p>
<em>@</em> in ref specs shouldn&#8217;t be magical.
</p>
<div class="paragraph"><p>The dk.brics.automaton package that is used to handle regular
expressions on branch access patterns supports <em>@</em> to mean
"any string".  We don&#8217;t want that behavior.  Fixed by disabling
the optional features of dk.brics.automaton, thereby making <em>@</em>
mean a literal <em>@</em> sign as expected.</p></div>
</li>
<li>
<p>
issue 668 Fix inherited Read Access +2 not inheriting
</p>
<div class="paragraph"><p>Upload access (aka Read +2) did not inherit properly from the parent
project (e.g. <em>-- All Projects --</em>) if there was any branch level
Read access control within the local project.  This was a coding
bug which failed to consider the project inheritance if any branch
(not just the one being uploaded to) denied upload access.</p></div>
</li>
</ul></div>
<h3 id="_misc">Misc.</h3><div style="clear:left"></div>
<div class="ulist"><ul>
<li>
<p>
issue 641 Don&#8217;t pass null arguments to hooks
</p>
<div class="paragraph"><p>Some hooks crashed inside of the server during invocation because the
<tt>gerrit.canonicalWebUrl</tt> variable wasn&#8217;t configured, and the hook
was started out of an SSH or background thread context, so the URL
couldn&#8217;t be assumed from the current request.  The bug was worked
around by not passing the <tt>\--change-url</tt> flag in these cases.
Administrators whose hooks always need the flag should configure
<tt>gerrit.canonicalWebUrl</tt>.</p></div>
</li>
<li>
<p>
issue 652 Fix NPE during merge failure on new branch
</p>
<div class="paragraph"><p>Submitting a change with a missing dependency to a new branch
resulted in a NullPointerException in the server, because the server
tried to create the branch anyway, even though there was no commit
ready because one or more dependencies were missing.  Fixed.</p></div>
</li>
<li>
<p>
Fix NPE while matching <tt>file:^</tt> pattern on deleted files
</p>
<div class="paragraph"><p>Sending email notifications crashed with NullPointerException if the
change contained a deleted file and one or more users had a project
watch on that project using a <tt>file:^</tt> pattern in their filter.
Fixed.</p></div>
</li>
<li>
<p>
issue 658 Allow to use refspec shortcuts for push replication
</p>
<div class="paragraph"><p>A push refspec of <tt>refs/heads/\*</tt> in replication.config is now
supported as a shorthand notation for <tt>refs/heads/\*:refs/heads/\*</tt>.</p></div>
</li>
<li>
<p>
issue 676 Fix clearing of topic during replace
</p>
<div class="paragraph"><p>The topic was cleared if a replacement patch set was uploaded without
the topic name.  The topic is now left as-is during replacement
if no new topic was supplied.  If a new topic is supplied, it is
changed to match the new topic given.</p></div>
</li>
<li>
<p>
Allow ; and &amp; to seperate parameters in gitweb
</p>
<div class="paragraph"><p>gitweb.cgi accepts either <em>;</em> or <em>&amp;</em> between parameters, but
Gerrit Code Review was only accepting the <em>;</em> syntax.  Fixed
to support both.</p></div>
</li>
</ul></div>
<h3 id="_documentation">Documentation</h3><div style="clear:left"></div>
<div class="ulist"><ul>
<li>
<p>
Fixed example for gerrit create-account.
</p>
</li>
<li>
<p>
gerrit.sh: Correct /etc/default path in error message
</p>
</li>
</ul></div>
</div>
<h2 id="_version">Version</h2>
<div class="sectionbody">
<div class="paragraph"><p>2765ff9e5f821100e9ca671f4d502b5c938457a5</p></div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 2.1.5<br />
Last updated 2012-01-27 09:47:03 MDT
</div>
</div>
</body>
</html>
