<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.3" />
<title>Release notes for Gerrit 2.0.11</title>
<style type="text/css">
/* Sans-serif font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
div#toctitle,
span#author, span#revnumber, span#revdate, span#revremark,
div#footer {
  font-family: Arial,Helvetica,sans-serif;
}

/* Serif font. */
div.sectionbody {
  font-family: Georgia,"Times New Roman",Times,serif;
}

/* Monospace font. */
tt {
  font-size: inherit;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  font-size: inherit;
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revnumber, span#revdate, span#revremark {
}

div#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  div#footer-badges { display: none; }
}

div#toc {
  margin-bottom: 2.5em;
}

div#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

</style>
<script type="text/javascript">
/*<![CDATA[*/
window.onload = function(){asciidoc.footnotes(); asciidoc.toc(2);}
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  var cont = document.getElementById("content");
  var noteholder = document.getElementById("footnotes");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      // Use [\s\S] in place of . so multi-line matches work.
      // Because JavaScript has no s (dotall) regex flag.
      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      spans[i].innerHTML =
        "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
        "' title='View footnote' class='footnote'>" + n + "</a>]";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
}

}
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>Release notes for Gerrit 2.0.11</h1>
<span id="revnumber">version 2.0.11 (from v2.1.1.1-104-gc20e283)</span>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Gerrit 2.0.11 is now available in the usual location:</p></div>
<div class="paragraph"><p><a href="http://code.google.com/p/gerrit/downloads/list">http://code.google.com/p/gerrit/downloads/list</a></p></div>
<div class="paragraph"><p><strong>WARNING: This version contains a schema change.</strong></p></div>
<div class="paragraph"><p>Apply the schema upgrade:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>  java -jar gerrit.war --cat sql/upgrade009_010.sql | psql reviewdb</tt></pre>
</div></div>
</div>
</div>
<div class="sect1">
<h2 id="_important_notes">Important Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cache_directory">Cache directory</h3>
<div class="paragraph"><p>Gerrit now prefers having a temporary directory to store a disk-based content cache.  This cache used to be in the PostgreSQL database, and was the primary reason for the rather large size of the Gerrit schema.  In 2.0.11 the cache has been moved to the local filesystem, and now has automatic expiration management to prevent it from growing too large.  As this is only a cache, making backups of this directory is not required.</p></div>
<div class="paragraph"><p>It is suggested (but not required) that you enable this cache:</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>  mkdir $site_path/disk_cache
  chown gerrituser $site_path/disk_cache
  chmod 700 $site_path/disk_cache           ; # just to be paranoid</tt></pre>
</div></div>
<div class="paragraph"><p>The directory can also be placed elsewhere in the local filesystem, see <tt>cache.directory</tt> in the <tt>gerrit.config</tt> file.</p></div>
<div class="paragraph"><p><a href="http://gerrit.googlecode.com/svn/documentation/2.0/config-gerrit.html">http://gerrit.googlecode.com/svn/documentation/2.0/config-gerrit.html</a></p></div>
</div>
<div class="sect2">
<h3 id="_protocol_change">Protocol change</h3>
<div class="paragraph"><p>The protocol between the browser based JavaScript and the server has changed.  After installing 2.0.11 users need to load the site page again to ensure they are running 2.0.11 or later.  Users can verify they have the new version by checking the version number in the footer in the lower right.  Users who don&#8217;t load the new version (e.g. are using a stale tab from a week ago) will see errors when trying to view patches.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_features">New Features</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
GERRIT-8    Add <em>Whole File</em> as a context preference in the user s&#8230;
</p>
</li>
<li>
<p>
GERRIT-9    Honor user&#8217;s "Default Context" preference
</p>
</li>
<li>
<p>
GERRIT-14   Split patch view RPCs into two halves
</p>
</li>
<li>
<p>
GERRIT-61   Database error in side by side view
</p>
</li>
<li>
<p>
GERRIT-156  Rewrite the side-by-side and unified diff viewers
</p>
<div class="paragraph"><p>The side by side and unified patch viewers have been completely rewritten.  Gerrit now honors the user&#8217;s Default Context setting (from My &gt; Settings) in both the side by side and the unified patch view.  A new "Whole File" setting is also available, showing the complete file.</p></div>
</li>
<li>
<p>
GERRIT-154  Add the branch name to the beginning of the subject li&#8230;
</p>
</li>
<li>
<p>
Sending mail when merge failed due to path conflict, m&#8230;
</p>
<div class="paragraph"><p>Some improvements have been made with regards to the emails sent by Gerrit.</p></div>
</li>
<li>
<p>
Configure the JGit WindowCache from $site_path/gerrit&#8230;.
</p>
</li>
<li>
<p>
Document the new gerrit.config file
</p>
<div class="paragraph"><p>Gerrit now supports a Git-style "$site_path/gerrit.config" configuration file.  Currently this supports configuration of the various memory caches, including control over JGit&#8217;s pack file cache.  See the updated documentation section for more details:
<a href="http://gerrit.googlecode.com/svn/documentation/2.0/config-gerrit.html">http://gerrit.googlecode.com/svn/documentation/2.0/config-gerrit.html</a></p></div>
</li>
<li>
<p>
Add "gerrit show-caches" to view cache statistics
</p>
<div class="paragraph"><p>There is a new administrative command over SSH called "gerrit show-caches" which displays current cache statistics for the various caches within the Gerrit memory space.</p></div>
</li>
<li>
<p>
Expand local part emails when creating new changes
</p>
<div class="paragraph"><p>Simple DWIMery: users can now do <tt>repo upload --reviewer=who</tt> to have the reviewer email automatically expand according to the email_format column in system_config, e.g. by expanding <tt>who</tt> to <tt>who@example.com</tt>.</p></div>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_bug_fixes">Bug Fixes</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
GERRIT-81   Can&#8217;t repack a repository while Gerrit is running
</p>
<div class="paragraph"><p>Running "git repack", "git gc" or "git fetch" in a repository owned by Gerrit is now safe while Gerrit is running.</p></div>
</li>
<li>
<p>
GERRIT-165  Don&#8217;t create new user accounts as full name = "null nu&#8230;
</p>
<div class="paragraph"><p>New users coming from Google Accounts OpenID provider where given a full name of "null null" rather than "Anonymous Coward".</p></div>
</li>
<li>
<p>
Honor account.preferred_email when checking co&#8230;
</p>
<div class="paragraph"><p>Service users created by manually inserting into the accounts table didn&#8217;t permit using their preferred_email in commits or tags; administrators had to also insert a dummy record into the account_external_ids table.  The dummy account_external_ids record is no longer necessary.</p></div>
</li>
</ul></div>
</div>
</div>
<div class="sect1">
<h2 id="_other_changes">Other Changes</h2>
<div class="sectionbody">
<div class="ulist"><ul>
<li>
<p>
Start 2.0.11 development
</p>
</li>
<li>
<p>
Include the <em>Google Format</em> style we selected in our p&#8230;
</p>
</li>
<li>
<p>
Upgrade JGit to v0.4.0-310-g3da8761
</p>
</li>
<li>
<p>
Include JGit sources when building GWT code
</p>
</li>
<li>
<p>
Cleanup classpath and use source JARs to build JavaScr&#8230;
</p>
</li>
<li>
<p>
Remove the ImportGerrit1 command line utility
</p>
</li>
<li>
<p>
Remove EncryptContactInfo helper program
</p>
</li>
<li>
<p>
Add custom serialization for jgit.diff.Edit
</p>
</li>
<li>
<p>
Add Ehcache 1.6.0-beta5 to our dependency list
</p>
</li>
<li>
<p>
Start/stop Ehcache when GerritServer starts/stops
</p>
</li>
<li>
<p>
Cache OpenID discovery results inside of Ehcache
</p>
</li>
<li>
<p>
Cache JGit FileHeader and EditList inside of Ehcache
</p>
</li>
<li>
<p>
Store FileHeader and EditList in Ehache during patch s&#8230;
</p>
</li>
<li>
<p>
Remove the now dead patch_contents table from the data&#8230;
</p>
</li>
<li>
<p>
Fix "null null" user names during schema upgrade from &#8230;
</p>
</li>
<li>
<p>
Work around asciidoc 8.2.2 not including our APLv2 lic&#8230;
</p>
</li>
<li>
<p>
Remove unused logger from SshServlet
</p>
</li>
<li>
<p>
Reuse is administrator test in admin SSH commands
</p>
</li>
<li>
<p>
Use common PrintWriter construction in command impleme&#8230;
</p>
</li>
<li>
<p>
Refactor gerrit flush-caches to just flush everything &#8230;
</p>
</li>
<li>
<p>
GERRIT-166  Move the SSH key cache into Ehcache
</p>
</li>
<li>
<p>
Change the diff cache serialization of JGit ObjectId i&#8230;
</p>
</li>
<li>
<p>
Fix git_base_path documentation in config-gerrit
</p>
</li>
<li>
<p>
Clarify the default max_session_age in config-gerrit
</p>
</li>
<li>
<p>
Enhance the site_path entry in config-gerrit
</p>
</li>
<li>
<p>
Clarify the caching of static assets under $site_path/&#8230;
</p>
</li>
<li>
<p>
Minor grammar fixes in the Google Analytics documentat&#8230;
</p>
</li>
<li>
<p>
Document that replication honors StrictHostKeyChecking
</p>
</li>
<li>
<p>
Document how ~/.ssh/known_hosts is used during replica&#8230;
</p>
</li>
<li>
<p>
Document how ssh-agent cannot be used for replication
</p>
</li>
<li>
<p>
Fix git_base_path references in project-setup
</p>
</li>
<li>
<p>
Cleanup project setup documentation
</p>
</li>
<li>
<p>
Expand the config-contact documentation to describe th&#8230;
</p>
</li>
<li>
<p>
Clarify the gitweb integration documentation
</p>
</li>
<li>
<p>
Minor corrections in install documentation
</p>
</li>
<li>
<p>
Reformat the config-gerrit page to free up section hea&#8230;
</p>
</li>
<li>
<p>
Enable table of contents in documentation files
</p>
</li>
<li>
<p>
Add the source code version number to documentation
</p>
</li>
<li>
<p>
More reformatting of the config-gerrit page
</p>
</li>
<li>
<p>
Cleanup formatting references for file system path var&#8230;
</p>
</li>
<li>
<p>
Cleanup the documentation index
</p>
</li>
<li>
<p>
Kill the feature roadmap in the documentation
</p>
</li>
<li>
<p>
Only use the disk cache directory if we can write to it
</p>
</li>
<li>
<p>
Change the title of the installation guide
</p>
</li>
<li>
<p>
Note in the developer install guides that you need to &#8230;
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Version 2.0.11 (from v2.1.1.1-104-gc20e283)<br />
Last updated 2012-06-20 15:52:18 CEST
</div>
</div>
</body>
</html>
